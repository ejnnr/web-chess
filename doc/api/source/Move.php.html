<html>
    <head>
        <script
            type="text/javascript"
            src="../js/jquery-1.4.2.min.js">
        </script>
        <script
            type="text/javascript"
            src="../syntax_highlighter/scripts/shCore.js">
        </script>
        <script
            type="text/javascript"
            src="../syntax_highlighter/scripts/shBrushJScript.js">
        </script>
        <script
            type="text/javascript"
            src="../syntax_highlighter/scripts/shBrushPhp.js">
        </script>
        <script
            type="text/javascript"
            src="../syntax_highlighter/scripts/shBrushXml.js">
        </script>
        <link
            href="../syntax_highlighter/styles/shCore.css" rel="stylesheet"
            type="text/css"
        />
        <link
            href="../syntax_highlighter/styles/shCoreEclipse.css"
            rel="stylesheet" type="text/css"
        />
        <link
            href="../syntax_highlighter/styles/shThemeWordpress.css"
            rel="stylesheet" type="text/css"
        />
    </head>
    <body>
        <pre class="brush: php">&lt;?php

/**
 * Contains the classes Move and MoveException
 */

/**
 * Include necessary files
 */
require_once 'square.php';

/**
 * A class respresenting a exception thrown by Move
 *
 * List of Exception Codes:
 *  1: Unknown internal error
 *  2: Null argument
 *  3: Wrong argument count
 *  4: Wrong argument type
 *  5: Invalid argument value (general)
 *  6: Invalid argument syntax (strings)
 *  7: Numerical argument outside of allowed range
 */

class MoveException extends Exception {}

/**
 * A class respresenting a chess move.
 */

class Move
{

	/**
	 * The departure square.
	 *
	 * This is an integer generated by string2square()
	 */

	private $departure;

	/**
	 * The destination square.
	 *
	 * This is an integer generated by string2square()
	 */

	private $destination;

	/**
	 * Constructor of Move.
	 *
	 * Sets up all private variables.
	 *
	 * @param mixed $departure square of departure; can be: string ('a1'), integer generated by string2square (0) or array ([$file, $rank) with file and rank count starting at zero
	 * @param mixed $destination destination square; can be: string ('a1'), integer generated by string2square (0) or array ([$file, $rank) with file and rank count starting at zero
	 */

	function __construct($departure, $destination)
	{
		//check for argument count
		if (func_num_args() != 2) {
			throw new MoveException('__construct: there must be two arguments', 3);
		}

		// check if departure or destination exist
		if ((!isset($departure))
		 || (!isset($destination))) {
			throw new MoveException('__construct: departure and destination must not be null', 2);
		}

		// check wich square format departure is and parse it
		if (is_int($departure)) {
			if (validateSquare($departure)) {
				$this-&gt;departure = $departure;
			} else {
				throw new MoveException('__construct: departure has an invalid value.', 5);
			}
		} elseif (is_string($departure)) {
			$departure = string2square($departure);
			if ($departure !== FALSE) {
				$this-&gt;departure = $departure;
			} else {
				throw new MoveException('__construct: departure has an invalid value.', 5);
			}
		} elseif (is_array($departure)) {
			$departure = array2square($departure);
			if ($departure !== FALSE) {
				$this-&gt;departure = $departure;
			} else {
				throw new MoveException('__construct: departure has an invalid value.', 5);
			}
		} else {
			throw new MoveException('__construct: departure is neither string nor integer nor array', 4);
		}

		// check wich square format destination is and parse it
		if (is_int($destination)) {
			if (validateSquare($destination)) {
				$this-&gt;destination = $destination;
			} else {
				throw new MoveException('__construct: destination has an invalid value.', 5);
			}
		} elseif (is_string($destination)) {
			$destination = string2square($destination);
			if ($destination !== FALSE) {
				$this-&gt;destination = $destination;
			} else {
				throw new MoveException('__construct: destination has an invalid value.', 5);
			}
		} elseif (is_array($destination)) {
			$destination = array2square($destination);
			if ($destination !== FALSE) {
				$this-&gt;destination = $destination;
			} else {
				throw new MoveException('__construct: destination has an invalid value.', 5);
			}
		} else {
			throw new MoveException('__construct: destination is neither string nor integer nor array', 4);
		}
	}

	/**
	 * Returns the departure square.
	 *
	 * You can specify the format you want the square to be returned in.
	 *
	 * @param int $format the format for the square; can be SQUARE_FORMAT_INT, SQUARE_FORMAT_STRING or SQUARE_FORMAT_ARRAY
	 */

	function getDeparture($format = SQUARE_FORMAT_INT)
	{
		switch ($format) {
			case SQUARE_FORMAT_INT:
				return $this-&gt;departure;
			case SQUARE_FORMAT_STRING:
				return square2string($this-&gt;departure);
			case SQUARE_FORMAT_ARRAY:
				return square2array($this-&gt;departure);
			default:
				throw new MoveException('getDeparture: format must be either 0, 1 or 2', 7);
		}
	}

	/**
	* Returns the destination square.
	*
	* You can specify the format you want the square to be returned in.
	*
	* @param int $format the format for the square; can be SQUARE_FORMAT_INT, SQUARE_FORMAT_STRING or SQUARE_FORMAT_ARRAY
	*/

	function getDestination($format = SQUARE_FORMAT_INT)
	{
		switch ($format) {
			case SQUARE_FORMAT_INT:
				return $this-&gt;destination;
			case SQUARE_FORMAT_STRING:
				return square2string($this-&gt;destination);
			case SQUARE_FORMAT_ARRAY:
				return square2array($this-&gt;destination);
			default:
				throw new MoveException('getDestination: format must be either 0, 1 or 2', 7);
		}
	}
}

?&gt;
</pre>
        <script type="text/javascript">
             SyntaxHighlighter.all();
             jQuery('.gutter div').each(function(key, data){
                jQuery(data).prepend('<a name="L'+jQuery(data).text()+'"/>');
             });
        </script>
    </body>
</html>